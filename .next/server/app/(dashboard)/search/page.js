(()=>{var e={};e.id=4957,e.ids=[4957],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},88887:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=t(50482),r=t(69108),l=t(62563),n=t.n(l),i=t(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let c=["",{children:["(dashboard)",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,34153)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/search/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,38170)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,31393)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1429)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/not-found.tsx"]}],d=["/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/search/page.tsx"],u="/(dashboard)/search/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},30062:(e,s,t)=>{Promise.resolve().then(t.bind(t,86462))},86462:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(95344),r=t(3729),l=t(22254),n=t(47674),i=t(20783),o=t.n(i),c=t(77622),d=t(16212),u=t(18822),x=t(15366),h=t(28240),m=t(94383),p=t(28765),y=t(99187);function g(){let e=(0,l.useSearchParams)(),{data:s}=(0,n.useSession)(),t=e.get("q")||"",[i,g]=(0,r.useState)([]),[f,j]=(0,r.useState)(!1),[v,b]=(0,r.useState)("all"),[w,N]=(0,r.useState)(t),k=(0,r.useCallback)(async(e,s="all")=>{if(!e.trim()){g([]);return}j(!0);try{let t=new URLSearchParams({q:e,type:s}),a=await fetch(`/api/search?${t}`);if(a.ok){let e=await a.json();g(e.results||[])}}catch(e){console.error("Error performing search:",e),(0,y.showToast)("error","Failed to perform search")}finally{j(!1)}},[]);(0,r.useEffect)(()=>{t&&(N(t),k(t,v))},[t,v,k]);let S=async(e,s)=>{try{(await fetch(`/api/users/${s}/follow`,{method:"POST"})).ok&&(g(s=>s.map(s=>"user"===s.type&&s.user?.id===e?{...s,user:{...s.user,isFollowing:!s.user.isFollowing}}:s)),(0,y.showToast)("success","Follow status updated"))}catch(e){console.error("Error following user:",e),(0,y.showToast)("error","Failed to update follow status")}},P=(0,r.useCallback)((e,s)=>{g(t=>t.map(t=>"post"===t.type&&t.post?.id===e?{...t,post:{...t.post,...s}}:t))},[]),_=(0,r.useCallback)(e=>{g(s=>s.filter(s=>!("post"===s.type&&s.post?.id===e)))},[]),C=e=>e?a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden",children:e.image?a.jsx("img",{src:e.image,alt:`${e.name}'s profile`,className:"w-full h-full object-cover"}):a.jsx(u.Z,{className:"w-6 h-6 text-gray-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["@",e.username]}),e.bio&&a.jsx("p",{className:"text-sm text-gray-600 truncate mt-1",children:e.bio})]})]}),s?.user?.id!==e.id&&a.jsx(d.z,{variant:e.isFollowing?"outline":"default",size:"sm",onClick:()=>S(e.id,e.username),className:"flex items-center space-x-1",children:e.isFollowing?(0,a.jsxs)(a.Fragment,{children:[a.jsx(x.Z,{className:"w-3 h-3"}),a.jsx("span",{children:"Following"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-3 h-3"}),a.jsx("span",{children:"Follow"})]})})]})},e.id):null,z=e=>e?a.jsx(c.y,{post:e,onUpdate:P,onDelete:_},e.id):null,q=e=>e?a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(m.Z,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(o(),{href:`/hashtag/${e.name}`,className:"text-lg font-semibold text-gray-900 hover:text-blue-600 hover:underline",children:["#",e.name]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e._count.posts," post",1!==e._count.posts?"s":""]})]})]})})}):null;return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Search"}),a.jsx("p",{className:"text-gray-600",children:"Find users and posts"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),k(w,v)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",value:w,onChange:e=>N(e.target.value),placeholder:"Search for users or posts...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(d.z,{type:"button",variant:"all"===v?"default":"outline",size:"sm",onClick:()=>b("all"),children:"All"}),a.jsx(d.z,{type:"button",variant:"users"===v?"default":"outline",size:"sm",onClick:()=>b("users"),children:"Users"}),a.jsx(d.z,{type:"button",variant:"posts"===v?"default":"outline",size:"sm",onClick:()=>b("posts"),children:"Posts"}),a.jsx(d.z,{type:"button",variant:"hashtags"===v?"default":"outline",size:"sm",onClick:()=>b("hashtags"),children:"Hashtags"})]}),(0,a.jsxs)(d.z,{type:"submit",disabled:f,className:"w-full",children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2"}),f?"Searching...":"Search"]})]})}),a.jsx("div",{className:"space-y-4",children:f?a.jsx("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]})},s))}):w&&0===i.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(p.Z,{className:"w-16 h-16 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),a.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or search type"})]}):w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:[i.length," result",1!==i.length?"s":"",' for "',w,'"']}),a.jsx("div",{className:"space-y-4",children:i.map((e,s)=>(0,a.jsxs)("div",{children:["user"===e.type&&C(e.user),"post"===e.type&&z(e.post),"hashtag"===e.type&&q(e.hashtag)]},`${e.type}-${s}`))})]}):(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(p.Z,{className:"w-16 h-16 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start searching"}),a.jsx("p",{className:"text-gray-500",children:"Enter a search term to find users and posts"})]})})]})}},94383:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},15366:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},28240:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},34153:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let a=(0,t(86843).createProxy)(String.raw`/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/search/page.tsx`),{__esModule:r,$$typeof:l}=a,n=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1638,4345,6632,2162,8863,3409,7622],()=>t(88887));module.exports=a})();