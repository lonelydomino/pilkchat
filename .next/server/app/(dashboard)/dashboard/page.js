(()=>{var e={};e.id=6903,e.ids=[6903],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},82084:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var t=a(50482),r=a(69108),l=a(62563),i=a.n(l),o=a(68300),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);a.d(s,n);let d=["",{children:["(dashboard)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,87861)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,38170)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,31393)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,1429)),"/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/not-found.tsx"]}],c=["/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/dashboard/page.tsx"],u="/(dashboard)/dashboard/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},92318:(e,s,a)=>{Promise.resolve().then(a.bind(a,4440))},4440:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var t=a(95344),r=a(3729),l=a(47674),i=a(16212),o=a(20016),n=a(14513),d=a(36135),c=a(99187),u=a(1350);function m({onPostCreated:e,placeholder:s="What's happening?",className:a=""}){let{data:m}=(0,l.useSession)(),[h,p]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)([]),y=(0,r.useCallback)(async s=>{if(s.preventDefault(),!m?.user?.id){(0,c.showToast)("error","You must be logged in to post");return}if(!h.trim()&&0===f.length){(0,c.showToast)("error","Please write something or add an image");return}g(!0);try{let s=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:h.trim(),mediaUrls:f})});if(s.ok){let a=await s.json();e(a),p(""),j([]),(0,c.showToast)("success","Post created successfully!")}else{let e=await s.json();(0,c.showToast)("error",e.error||"Failed to create post")}}catch(e){console.error("Error creating post:",e),(0,c.showToast)("error","Failed to create post")}finally{g(!1)}},[h,f,m?.user?.id,e]),b=e=>{j(s=>s.filter((s,a)=>a!==e))},v=280-h.length,w=v<0;return t.jsx("div",{className:`bg-white rounded-lg shadow p-6 ${a}`,children:(0,t.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("textarea",{value:h,onChange:e=>p(e.target.value),placeholder:s,className:"w-full p-4 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,maxLength:280}),t.jsx("div",{className:"flex justify-between items-center mt-2",children:(0,t.jsxs)("span",{className:`text-sm ${w?"text-red-500":"text-gray-500"}`,children:[v," characters remaining"]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(o.Z,{className:"w-5 h-5 text-gray-500"}),t.jsx("span",{className:"text-sm text-gray-500",children:"Add images to your post"})]}),f.length<4&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(u.U,{onUpload:e=>{if(f.length>=4){(0,c.showToast)("error","Maximum 4 images allowed per post");return}j(s=>[...s,e])},size:"sm",variant:"compact",aspectRatio:"auto",placeholder:"Add image",maxSize:5}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[f.length,"/4 images"]})]}),f.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map((e,s)=>(0,t.jsxs)("div",{className:"relative group",children:[t.jsx("img",{src:e,alt:`Post image ${s+1}`,className:"w-full h-32 object-cover rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>b(s),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(n.Z,{className:"w-4 h-4"})})]},s))})]}),t.jsx("div",{className:"flex justify-end",children:(0,t.jsxs)(i.z,{type:"submit",disabled:x||!h.trim()&&0===f.length||w,className:"flex items-center space-x-2",children:[t.jsx(d.Z,{className:"w-4 h-4"}),t.jsx("span",{children:x?"Posting...":"Post"})]})})]})})}var h=a(77622),p=a(50169);function x(){let{data:e}=(0,l.useSession)(),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[n,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0),[x,g]=(0,r.useState)([]),f=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/posts");if(e.ok){let s=await e.json();a(s.posts)}}catch(e){console.error("Error fetching posts:",e)}finally{o(!1)}},[]);(0,r.useEffect)(()=>{f()},[f]);let j=(0,r.useCallback)(e=>{a(s=>[e,...s])},[]),y=(0,r.useCallback)((e,s)=>{a(a=>a.map(a=>a.id===e?{...a,...s}:a))},[]),b=(0,r.useCallback)(e=>{a(s=>s.filter(s=>s.id!==e))},[]),v=(e,s)=>{g(e),u(s),d(!0)};return i?t.jsx("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}),[void 0,void 0,void 0].map((e,s)=>t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})},s))]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Home"}),t.jsx("p",{className:"text-gray-600",children:"See what's happening in your network"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx(m,{onPostCreated:j}),0===s.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No posts yet"}),t.jsx("p",{className:"text-gray-500",children:"Be the first to share something!"})]}):s.map(e=>t.jsx(h.y,{post:e,onUpdate:y,onDelete:b,onImageClick:v},e.id))]})]}),x.length>0&&t.jsx(p.y,{images:x,currentIndex:c,isOpen:n,onClose:()=>{d(!1)},onNavigate:e=>{u(e)}})]})}},1350:(e,s,a)=>{"use strict";a.d(s,{U:()=>c});var t=a(95344),r=a(3729),l=a(16212),i=a(14513),o=a(51838),n=a(20016),d=a(99187);function c({onUpload:e,onRemove:s,currentImage:a,className:c="",size:u="md",aspectRatio:m="square",maxSize:h=5,allowedTypes:p=["image/jpeg","image/jpg","image/png","image/webp","image/gif"],placeholder:x="Upload image",variant:g="default"}){let[f,j]=(0,r.useState)(!1),[y,b]=(0,r.useState)(a||null),[v,w]=(0,r.useState)(!1),N=(0,r.useRef)(null),S=()=>{switch(u){case"sm":return"compact"===g?"w-16 h-16":"w-20 h-20";case"lg":return"w-32 h-32";default:return"compact"===g?"w-20 h-20":"w-24 h-24"}},k=()=>{switch(m){case"video":return"aspect-video";case"auto":return"aspect-auto";default:return"aspect-square"}},P=e=>{if(!p.includes(e.type))return`Invalid file type. Allowed types: ${p.join(", ")}`;let s=1048576*h;return e.size>s?`File size too large. Maximum size is ${h}MB.`:null},C=(0,r.useCallback)(async s=>{let a=P(s);if(a){(0,d.showToast)("error",a);return}j(!0);try{let a=new FormData;a.append("image",s);let t=await fetch("/api/upload/image",{method:"POST",body:a});if(t.ok){let s=await t.json();b(s.url),e(s.url),(0,d.showToast)("success","Image uploaded successfully")}else{let e=await t.json();(0,d.showToast)("error",e.error||"Failed to upload image")}}catch(e){console.error("Error uploading image:",e),(0,d.showToast)("error","Failed to upload image")}finally{j(!1)}},[e,p,h]),M=e=>{let s=e.target.files?.[0];s&&C(s)},D=(0,r.useCallback)(e=>{e.preventDefault(),w(!1);let s=Array.from(e.dataTransfer.files).find(e=>e.type.startsWith("image/"));s?C(s):(0,d.showToast)("error","Please select an image file")},[C]),$=e=>{e.preventDefault(),w(!0)},z=e=>{e.preventDefault(),w(!1)},_=()=>{b(null),s?.(),N.current&&(N.current.value="")},T=()=>{N.current?.click()};return"compact"===g?(0,t.jsxs)("div",{className:`relative ${c}`,children:[t.jsx("div",{className:`
            ${S()} ${k()}
            border border-gray-300 rounded-lg
            flex items-center justify-center
            transition-all duration-200
            ${v?"border-blue-500 bg-blue-50":"hover:border-gray-400 hover:bg-gray-50"}
            ${f?"opacity-50 cursor-not-allowed":"cursor-pointer"}
          `,onDrop:D,onDragOver:$,onDragLeave:z,onClick:f?void 0:T,children:y?(0,t.jsxs)("div",{className:"relative w-full h-full",children:[t.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),!f&&t.jsx("button",{onClick:e=>{e.stopPropagation(),_()},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 hover:bg-red-600 transition-colors",children:t.jsx(i.Z,{className:"w-3 h-3"})})]}):t.jsx("div",{className:"text-center",children:f?(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[t.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Uploading..."})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[t.jsx(o.Z,{className:"w-5 h-5 text-gray-400"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Add"})]})})}),t.jsx("input",{ref:N,type:"file",accept:p.join(","),onChange:M,className:"hidden",disabled:f})]}):"button"===g?(0,t.jsxs)("div",{className:`relative ${c}`,children:[t.jsx(l.z,{type:"button",variant:"outline",size:"sm",onClick:T,disabled:f,className:"flex items-center space-x-2",children:f?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Uploading..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.Z,{className:"w-4 h-4"}),t.jsx("span",{children:x})]})}),t.jsx("input",{ref:N,type:"file",accept:p.join(","),onChange:M,className:"hidden",disabled:f})]}):(0,t.jsxs)("div",{className:`relative ${c}`,children:[t.jsx("div",{className:`
          ${S()} ${k()}
          border-2 border-dashed rounded-lg
          flex items-center justify-center
          transition-all duration-200
          ${v?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${f?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,onDrop:D,onDragOver:$,onDragLeave:z,onClick:f?void 0:T,children:y?(0,t.jsxs)("div",{className:"relative w-full h-full",children:[t.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),!f&&t.jsx("button",{onClick:e=>{e.stopPropagation(),_()},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:t.jsx(i.Z,{className:"w-4 h-4"})})]}):t.jsx("div",{className:"text-center",children:f?(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Uploading..."})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[t.jsx(n.Z,{className:"w-8 h-8 text-gray-400"}),t.jsx("p",{className:"text-sm text-gray-500",children:x}),t.jsx("p",{className:"text-xs text-gray-400",children:"Drag & drop or click to upload"})]})})}),t.jsx("input",{ref:N,type:"file",accept:p.join(","),onChange:M,className:"hidden",disabled:f}),!y&&!f&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[t.jsx("p",{children:"Supported formats: JPEG, PNG, WebP, GIF"}),(0,t.jsxs)("p",{children:["Maximum size: ",h,"MB"]})]})]})}},20016:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(69224).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},51838:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},87861:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let t=(0,a(86843).createProxy)(String.raw`/Users/michaelmartinez/My Stuff/Software Development/BlueSky Clone/app/(dashboard)/dashboard/page.tsx`),{__esModule:r,$$typeof:l}=t,i=t.default}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[1638,4345,6632,2162,8863,3409,7622],()=>a(82084));module.exports=t})();